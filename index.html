<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home Automation</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>
<!-- Your existing HTML structure remains the same -->
<div class="header">
    Home Automation
    <button class="edit-btn" id="editBtn">‚úé Edit</button>
    <button class="header-control save-btn" id="saveBtn">üíæ Save</button>
    <button id="clearAllBtn" class="header-control clear-all-btn" title="Clear all buttons, entities, and local storage">üóëÔ∏è Clear All</button>
    <div class="edit-controls" id="editControls">
        <button class="header-control small-btn" id="imageBtn" title="Change Image">
            <i class="fas fa-image"></i>
        </button>
        <button class="header-control small-btn" id="addBtn" title="Add Button">
            <i class="fas fa-plus"></i>
        </button>
    </div>
</div>

<div class="content" id="container">
    <button class="reset-btn" id="resetBtn">‚Ü∫</button>

    <div class="viewer-center">
        <div class="pan-layer" id="panLayer">
            <img id="viewImage" src="image.png" alt="floor plan">
        </div>
    </div>
</div>

<div class="footer">
    Ready
    <button class="footer-control load-btn" id="loadBtn">üìÇ Load</button>
</div>

<!-- Hidden file inputs -->
<input type="file" id="imageFileInput" accept="image/*" style="display: none;">
<input type="file" id="loadFileInput" accept=".json" style="display: none;">

<!-- Button Picker Modal -->
<div class="modal-overlay" id="buttonPickerModal">
    <div class="modal">
        <div class="modal-header">
            <h3>Add Button</h3>
            <button class="modal-close" id="closePickerBtn">&times;</button>
        </div>
        <div class="modal-body">
            <div class="button-type-list">
                <div class="button-type-item" data-type="toggle" data-icon="fa-lightbulb">
                    <i class="fas fa-lightbulb"></i>
                    <span>Toggle Light</span>
                    <small>On/Off switch for lights</small>
                </div>
                <div class="button-type-item" data-type="scene" data-icon="fa-palette">
                    <i class="fas fa-palette"></i>
                    <span>Scene</span>
                    <small>Activate a scene</small>
                </div>
                <div class="button-type-item" data-type="dimmer" data-icon="fa-sliders-h">
                    <i class="fas fa-sliders-h"></i>
                    <span>Dimmer</span>
                    <small>Brightness control</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Button Edit Modal -->
<div class="modal-overlay" id="buttonEditModal">
    <div class="modal">
        <div class="modal-header">
            <h3>Edit Button</h3>
            <button class="modal-close" id="closeEditBtn">&times;</button>
        </div>
        <div class="modal-body">
            <form id="buttonEditForm">
                <div class="form-group">
                    <label for="editEntityId">Entity ID:</label>
                    <input type="text" id="editEntityId" required>
                </div>
                <div class="form-group">
                    <label for="editName">Name:</label>
                    <input type="text" id="editName">
                </div>
                <div class="form-group">
                    <label for="editIcon">Icon:</label>
                    <select id="editIcon">
                        <option value="fa-lightbulb">Light Bulb</option>
                        <option value="fa-toggle-on">Toggle Switch</option>
                        <option value="fa-sun">Sun</option>
                        <option value="fa-lamp">Lamp</option>
                        <option value="fa-lightbulb-on">Light On</option>
                        <option value="fa-sliders-h">Dimmer Slider</option>
                    </select>
                </div>
                <!-- Brightness group removed as requested -->
                <div class="form-actions">
                    <button type="button" class="btn-delete" id="deleteBtn">Delete</button>
                    <button type="submit" class="btn-update">Update</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="toggle-button.js"></script>
<script src="button.js"></script>
<script src="dimmer.js"></script>
<script src="main.js"></script>
</body>
</html>